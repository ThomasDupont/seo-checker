{"version":3,"file":"context.js","names":["Equal","dual","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","EffectPrototype","effectVariance","option","TagTypeId","Symbol","for","STMSymbolKey","STMTypeId","TagProto","_tag","_op","_Service","_","_Identifier","toString","_id","key","stack","of","self","context","make","makeGenericTag","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","get","Tag","id","TagClass","setPrototypeOf","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","has","equals","cached","number","pipe","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","isTag","_empty","Map","empty","service","add","set","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}