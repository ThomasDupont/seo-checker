{"version":3,"file":"rateLimiter.js","names":["Duration","Effect","FiberRef","globalValue","make","algorithm","interval","limit","fixedWindow","tokenBucket","window","gen","_","millisPerToken","Math","ceil","toMillis","semaphore","makeSemaphore","latch","refill","sleep","pipe","zipRight","releaseAll","release","flatMap","free","void","take","forever","forkScoped","interruptible","uninterruptibleMask","restore","get","currentCost","cost","effect","Symbol","for","unsafeMake","withCost","locally"],"sources":["../../../src/internal/rateLimiter.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}