{"version":3,"file":"logger.js","names":["constVoid","dual","pipe","HashMap","Inspectable","List","LogSpan","Option","pipeArguments","Cause","_fiberId","LoggerSymbolKey","LoggerTypeId","Symbol","for","loggerVariance","_Message","_","_Output","makeLogger","log","arguments","mapInput","self","f","options","message","mapInputOptions","filterLogLevel","logLevel","some","none","map","simple","succeed","value","sync","evaluate","zip","that","zipLeft","tuple","zipRight","stringLogger","annotations","cause","date","fiberId","spans","nowMillis","getTime","outputArray","toISOString","label","threadName","output","join","Array","isArray","i","length","stringMessage","toStringUnknown","appendQuoted","_tag","pretty","isCons","first","span","render","size","key","filterKeyName","escapeDoubleQuotes","str","replace","textOnly","match","logfmtLogger","appendQuotedLogfmt","renderLogSpanLogfmt","structuredLogger","now","annotationsObj","spansObj","k","v","structuredMessage","startTime","timestamp","isEmpty","undefined","u","String","jsonLogger","stringifyCircular","escapeDoubleQuotesLogfmt","JSON","stringify","isLogger"],"sources":["../../../src/internal/logger.ts"],"sourcesContent":[null],"mappings":"AACA,SAASA,SAAS,EAAEC,IAAI,EAAEC,IAAI,QAAQ,gBAAgB;AACtD,OAAO,KAAKC,OAAO,MAAM,eAAe;AACxC,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAChD,OAAO,KAAKC,IAAI,MAAM,YAAY;AAGlC,OAAO,KAAKC,OAAO,MAAM,eAAe;AACxC,OAAO,KAAKC,MAAM,MAAM,cAAc;AACtC,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,OAAO,KAAKC,KAAK,MAAM,YAAY;AACnC,OAAO,KAAKC,QAAQ,MAAM,cAAc;AAExC;AACA,MAAMC,eAAe,GAAG,eAAe;AAEvC;AACA,OAAO,MAAMC,YAAY,gBAAwBC,MAAM,CAACC,GAAG,CACzDH,eAAe,CACO;AAExB,MAAMI,cAAc,GAAG;EACrB;EACAC,QAAQ,EAAGC,CAAU,IAAKA,CAAC;EAC3B;EACAC,OAAO,EAAGD,CAAQ,IAAKA;CACxB;AAED;AACA,OAAO,MAAME,UAAU,GACrBC,GAAwD,KACpB;EACpC,CAACR,YAAY,GAAGG,cAAc;EAC9BK,GAAG;EACHlB,IAAIA,CAAA;IACF,OAAOM,aAAa,CAAC,IAAI,EAAEa,SAAS,CAAC;EACvC;CACD,CAAC;AAEF;AACA,OAAO,MAAMC,QAAQ,gBAAGrB,IAAI,CAQ1B,CAAC,EAAE,CAACsB,IAAI,EAAEC,CAAC,KACXL,UAAU,CACPM,OAAO,IAAKF,IAAI,CAACH,GAAG,CAAC;EAAE,GAAGK,OAAO;EAAEC,OAAO,EAAEF,CAAC,CAACC,OAAO,CAACC,OAAO;AAAC,CAAE,CAAC,CACnE,CAAC;AAEJ;AACA,OAAO,MAAMC,eAAe,gBAAG1B,IAAI,CAQjC,CAAC,EAAE,CAACsB,IAAI,EAAEC,CAAC,KAAKL,UAAU,CAAEM,OAAO,IAAKF,IAAI,CAACH,GAAG,CAACI,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;AAEhE;AACA,OAAO,MAAMG,cAAc,gBAAG3B,IAAI,CAQhC,CAAC,EAAE,CAACsB,IAAI,EAAEC,CAAC,KACXL,UAAU,CAAEM,OAAO,IACjBD,CAAC,CAACC,OAAO,CAACI,QAAQ,CAAC,GACftB,MAAM,CAACuB,IAAI,CAACP,IAAI,CAACH,GAAG,CAACK,OAAO,CAAC,CAAC,GAC9BlB,MAAM,CAACwB,IAAI,EAAE,CAClB,CAAC;AAEJ;AACA,OAAO,MAAMC,GAAG,gBAAG/B,IAAI,CAQrB,CAAC,EAAE,CAACsB,IAAI,EAAEC,CAAC,KAAKL,UAAU,CAAEM,OAAO,IAAKD,CAAC,CAACD,IAAI,CAACH,GAAG,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC;AAEhE;AACA,OAAO,MAAMM,IAAI,GAAiC;EAChD,CAACnB,YAAY,GAAGG,cAAc;EAC9BK,GAAG,EAAEpB,SAAS;EACdE,IAAIA,CAAA;IACF,OAAOM,aAAa,CAAC,IAAI,EAAEa,SAAS,CAAC;EACvC;CAC+B;AAEjC;AACA,OAAO,MAAMY,MAAM,GAAUb,GAAgB,KAA2B;EACtE,CAACR,YAAY,GAAGG,cAAc;EAC9BK,GAAG,EAAEA,CAAC;IAAEM;EAAO,CAAE,KAAKN,GAAG,CAACM,OAAO,CAAC;EAClCxB,IAAIA,CAAA;IACF,OAAOM,aAAa,CAAC,IAAI,EAAEa,SAAS,CAAC;EACvC;CACD,CAAC;AAEF;AACA,OAAO,MAAMa,OAAO,GAAOC,KAAQ,IAA+B;EAChE,OAAOF,MAAM,CAAC,MAAME,KAAK,CAAC;AAC5B,CAAC;AAED;AACA,OAAO,MAAMC,IAAI,GAAOC,QAAoB,IAA+B;EACzE,OAAOJ,MAAM,CAACI,QAAQ,CAAC;AACzB,CAAC;AAED;AACA,OAAO,MAAMC,GAAG,gBAAGrC,IAAI,CAUrB,CAAC,EAAE,CAACsB,IAAI,EAAEgB,IAAI,KAAKpB,UAAU,CAAEM,OAAO,IAAK,CAACF,IAAI,CAACH,GAAG,CAACK,OAAO,CAAC,EAAEc,IAAI,CAACnB,GAAG,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC;AAErF;AACA,OAAO,MAAMe,OAAO,gBAAGvC,IAAI,CAUzB,CAAC,EAAE,CAACsB,IAAI,EAAEgB,IAAI,KAAKP,GAAG,CAACM,GAAG,CAACf,IAAI,EAAEgB,IAAI,CAAC,EAAGE,KAAK,IAAKA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAE/D;AACA,OAAO,MAAMC,QAAQ,gBAAGzC,IAAI,CAU1B,CAAC,EAAE,CAACsB,IAAI,EAAEgB,IAAI,KAAKP,GAAG,CAACM,GAAG,CAACf,IAAI,EAAEgB,IAAI,CAAC,EAAGE,KAAK,IAAKA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAE/D;AACA,OAAO,MAAME,YAAY,gBAAmCxB,UAAU,CACpE,CAAC;EAAEyB,WAAW;EAAEC,KAAK;EAAEC,IAAI;EAAEC,OAAO;EAAElB,QAAQ;EAAEH,OAAO;EAAEsB;AAAK,CAAE,KAAI;EAClE,MAAMC,SAAS,GAAGH,IAAI,CAACI,OAAO,EAAE;EAEhC,MAAMC,WAAW,GAAG,CAClB,aAAaL,IAAI,CAACM,WAAW,EAAE,EAAE,EACjC,SAASvB,QAAQ,CAACwB,KAAK,EAAE,EACzB,SAAS3C,QAAQ,CAAC4C,UAAU,CAACP,OAAO,CAAC,EAAE,CACxC;EAED,IAAIQ,MAAM,GAAGJ,WAAW,CAACK,IAAI,CAAC,GAAG,CAAC;EAElC,IAAIC,KAAK,CAACC,OAAO,CAAChC,OAAO,CAAC,EAAE;IAC1B,KAAK,IAAIiC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjC,OAAO,CAACkC,MAAM,EAAED,CAAC,EAAE,EAAE;MACvC,MAAME,aAAa,GAAGzD,WAAW,CAAC0D,eAAe,CAACpC,OAAO,CAACiC,CAAC,CAAC,CAAC;MAC7D,IAAIE,aAAa,CAACD,MAAM,GAAG,CAAC,EAAE;QAC5BL,MAAM,GAAGA,MAAM,GAAG,WAAW;QAC7BA,MAAM,GAAGQ,YAAY,CAACF,aAAa,EAAEN,MAAM,CAAC;MAC9C;IACF;EACF,CAAC,MAAM;IACL,MAAMM,aAAa,GAAGzD,WAAW,CAAC0D,eAAe,CAACpC,OAAO,CAAC;IAC1D,IAAImC,aAAa,CAACD,MAAM,GAAG,CAAC,EAAE;MAC5BL,MAAM,GAAGA,MAAM,GAAG,WAAW;MAC7BA,MAAM,GAAGQ,YAAY,CAACF,aAAa,EAAEN,MAAM,CAAC;IAC9C;EACF;EAEA,IAAIV,KAAK,IAAI,IAAI,IAAIA,KAAK,CAACmB,IAAI,KAAK,OAAO,EAAE;IAC3CT,MAAM,GAAGA,MAAM,GAAG,SAAS;IAC3BA,MAAM,GAAGQ,YAAY,CAACtD,KAAK,CAACwD,MAAM,CAACpB,KAAK,CAAC,EAAEU,MAAM,CAAC;EACpD;EAEA,IAAIlD,IAAI,CAAC6D,MAAM,CAAClB,KAAK,CAAC,EAAE;IACtBO,MAAM,GAAGA,MAAM,GAAG,GAAG;IAErB,IAAIY,KAAK,GAAG,IAAI;IAChB,KAAK,MAAMC,IAAI,IAAIpB,KAAK,EAAE;MACxB,IAAImB,KAAK,EAAE;QACTA,KAAK,GAAG,KAAK;MACf,CAAC,MAAM;QACLZ,MAAM,GAAGA,MAAM,GAAG,GAAG;MACvB;MACAA,MAAM,GAAGA,MAAM,GAAGrD,IAAI,CAACkE,IAAI,EAAE9D,OAAO,CAAC+D,MAAM,CAACpB,SAAS,CAAC,CAAC;IACzD;EACF;EAEA,IAAI/C,IAAI,CAAC0C,WAAW,EAAEzC,OAAO,CAACmE,IAAI,CAAC,GAAG,CAAC,EAAE;IACvCf,MAAM,GAAGA,MAAM,GAAG,GAAG;IAErB,IAAIY,KAAK,GAAG,IAAI;IAChB,KAAK,MAAM,CAACI,GAAG,EAAEpC,KAAK,CAAC,IAAIS,WAAW,EAAE;MACtC,IAAIuB,KAAK,EAAE;QACTA,KAAK,GAAG,KAAK;MACf,CAAC,MAAM;QACLZ,MAAM,GAAGA,MAAM,GAAG,GAAG;MACvB;MACAA,MAAM,GAAGA,MAAM,GAAGiB,aAAa,CAACD,GAAG,CAAC;MACpChB,MAAM,GAAGA,MAAM,GAAG,GAAG;MACrBA,MAAM,GAAGQ,YAAY,CAAC3D,WAAW,CAAC0D,eAAe,CAAC3B,KAAK,CAAC,EAAEoB,MAAM,CAAC;IACnE;EACF;EAEA,OAAOA,MAAM;AACf,CAAC,CACF;AAED;AACA,MAAMkB,kBAAkB,GAAIC,GAAW,IAAK,IAAIA,GAAG,CAACC,OAAO,CAAC,iBAAiB,EAAE,QAAQ,CAAC,GAAG;AAE3F,MAAMC,QAAQ,GAAG,YAAY;AAE7B;AACA,MAAMb,YAAY,GAAGA,CAACV,KAAa,EAAEE,MAAc,KACjDA,MAAM,IAAIF,KAAK,CAACwB,KAAK,CAACD,QAAQ,CAAC,GAAGvB,KAAK,GAAGoB,kBAAkB,CAACpB,KAAK,CAAC,CAAC;AAEtE;AACA,OAAO,MAAMyB,YAAY,gBAAG3D,UAAU,CACpC,CAAC;EAAEyB,WAAW;EAAEC,KAAK;EAAEC,IAAI;EAAEC,OAAO;EAAElB,QAAQ;EAAEH,OAAO;EAAEsB;AAAK,CAAE,KAAI;EAClE,MAAMC,SAAS,GAAGH,IAAI,CAACI,OAAO,EAAE;EAEhC,MAAMC,WAAW,GAAG,CAClB,aAAaL,IAAI,CAACM,WAAW,EAAE,EAAE,EACjC,SAASvB,QAAQ,CAACwB,KAAK,EAAE,EACzB,SAAS3C,QAAQ,CAAC4C,UAAU,CAACP,OAAO,CAAC,EAAE,CACxC;EAED,IAAIQ,MAAM,GAAGJ,WAAW,CAACK,IAAI,CAAC,GAAG,CAAC;EAElC,IAAIC,KAAK,CAACC,OAAO,CAAChC,OAAO,CAAC,EAAE;IAC1B,KAAK,IAAIiC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjC,OAAO,CAACkC,MAAM,EAAED,CAAC,EAAE,EAAE;MACvC,MAAME,aAAa,GAAGzD,WAAW,CAAC0D,eAAe,CAACpC,OAAO,CAACiC,CAAC,CAAC,EAAE,CAAC,CAAC;MAChE,IAAIE,aAAa,CAACD,MAAM,GAAG,CAAC,EAAE;QAC5BL,MAAM,GAAGA,MAAM,GAAG,WAAW;QAC7BA,MAAM,GAAGwB,kBAAkB,CAAClB,aAAa,EAAEN,MAAM,CAAC;MACpD;IACF;EACF,CAAC,MAAM;IACL,MAAMM,aAAa,GAAGzD,WAAW,CAAC0D,eAAe,CAACpC,OAAO,EAAE,CAAC,CAAC;IAC7D,IAAImC,aAAa,CAACD,MAAM,GAAG,CAAC,EAAE;MAC5BL,MAAM,GAAGA,MAAM,GAAG,WAAW;MAC7BA,MAAM,GAAGwB,kBAAkB,CAAClB,aAAa,EAAEN,MAAM,CAAC;IACpD;EACF;EAEA,IAAIV,KAAK,IAAI,IAAI,IAAIA,KAAK,CAACmB,IAAI,KAAK,OAAO,EAAE;IAC3CT,MAAM,GAAGA,MAAM,GAAG,SAAS;IAC3BA,MAAM,GAAGwB,kBAAkB,CAACtE,KAAK,CAACwD,MAAM,CAACpB,KAAK,CAAC,EAAEU,MAAM,CAAC;EAC1D;EAEA,IAAIlD,IAAI,CAAC6D,MAAM,CAAClB,KAAK,CAAC,EAAE;IACtBO,MAAM,GAAGA,MAAM,GAAG,GAAG;IAErB,IAAIY,KAAK,GAAG,IAAI;IAChB,KAAK,MAAMC,IAAI,IAAIpB,KAAK,EAAE;MACxB,IAAImB,KAAK,EAAE;QACTA,KAAK,GAAG,KAAK;MACf,CAAC,MAAM;QACLZ,MAAM,GAAGA,MAAM,GAAG,GAAG;MACvB;MACAA,MAAM,GAAGA,MAAM,GAAGrD,IAAI,CAACkE,IAAI,EAAEY,mBAAmB,CAAC/B,SAAS,CAAC,CAAC;IAC9D;EACF;EAEA,IAAI/C,IAAI,CAAC0C,WAAW,EAAEzC,OAAO,CAACmE,IAAI,CAAC,GAAG,CAAC,EAAE;IACvCf,MAAM,GAAGA,MAAM,GAAG,GAAG;IAErB,IAAIY,KAAK,GAAG,IAAI;IAChB,KAAK,MAAM,CAACI,GAAG,EAAEpC,KAAK,CAAC,IAAIS,WAAW,EAAE;MACtC,IAAIuB,KAAK,EAAE;QACTA,KAAK,GAAG,KAAK;MACf,CAAC,MAAM;QACLZ,MAAM,GAAGA,MAAM,GAAG,GAAG;MACvB;MACAA,MAAM,GAAGA,MAAM,GAAGiB,aAAa,CAACD,GAAG,CAAC;MACpChB,MAAM,GAAGA,MAAM,GAAG,GAAG;MACrBA,MAAM,GAAGwB,kBAAkB,CAAC3E,WAAW,CAAC0D,eAAe,CAAC3B,KAAK,EAAE,CAAC,CAAC,EAAEoB,MAAM,CAAC;IAC5E;EACF;EAEA,OAAOA,MAAM;AACf,CAAC,CACF;AAED;AACA,OAAO,MAAM0B,gBAAgB,gBAAG9D,UAAU,CASxC,CAAC;EAAEyB,WAAW;EAAEC,KAAK;EAAEC,IAAI;EAAEC,OAAO;EAAElB,QAAQ;EAAEH,OAAO;EAAEsB;AAAK,CAAE,KAAI;EAClE,MAAMkC,GAAG,GAAGpC,IAAI,CAACI,OAAO,EAAE;EAC1B,MAAMiC,cAAc,GAA4B,EAAE;EAClD,MAAMC,QAAQ,GAA2B,EAAE;EAE3C,IAAIjF,OAAO,CAACmE,IAAI,CAAC1B,WAAW,CAAC,GAAG,CAAC,EAAE;IACjC,KAAK,MAAM,CAACyC,CAAC,EAAEC,CAAC,CAAC,IAAI1C,WAAW,EAAE;MAChCuC,cAAc,CAACE,CAAC,CAAC,GAAGE,iBAAiB,CAACD,CAAC,CAAC;IAC1C;EACF;EAEA,IAAIjF,IAAI,CAAC6D,MAAM,CAAClB,KAAK,CAAC,EAAE;IACtB,KAAK,MAAMoB,IAAI,IAAIpB,KAAK,EAAE;MACxBoC,QAAQ,CAAChB,IAAI,CAACf,KAAK,CAAC,GAAG6B,GAAG,GAAGd,IAAI,CAACoB,SAAS;IAC7C;EACF;EAEA,OAAO;IACL9D,OAAO,EAAE6D,iBAAiB,CAAC7D,OAAO,CAAC;IACnCG,QAAQ,EAAEA,QAAQ,CAACwB,KAAK;IACxBoC,SAAS,EAAE3C,IAAI,CAACM,WAAW,EAAE;IAC7BP,KAAK,EAAEpC,KAAK,CAACiF,OAAO,CAAC7C,KAAK,CAAC,GAAG8C,SAAS,GAAGlF,KAAK,CAACwD,MAAM,CAACpB,KAAK,CAAC;IAC7DD,WAAW,EAAEuC,cAAc;IAC3BnC,KAAK,EAAEoC,QAAQ;IACfrC,OAAO,EAAErC,QAAQ,CAAC4C,UAAU,CAACP,OAAO;GACrC;AACH,CAAC,CACF;AAED,OAAO,MAAMwC,iBAAiB,GAAIK,CAAU,IAAa;EACvD,QAAQ,OAAOA,CAAC;IACd,KAAK,QAAQ;IACb,KAAK,UAAU;IACf,KAAK,QAAQ;MAAE;QACb,OAAOC,MAAM,CAACD,CAAC,CAAC;MAClB;IACA;MAAS;QACP,OAAOA,CAAC;MACV;EACF;AACF,CAAC;AAED;AACA,OAAO,MAAME,UAAU,gBAAG9D,GAAG,CAACiD,gBAAgB,EAAE7E,WAAW,CAAC2F,iBAAiB,CAAC;AAE9E;AACA,MAAMvB,aAAa,GAAID,GAAW,IAAKA,GAAG,CAACI,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;AAElE;AACA,MAAMqB,wBAAwB,GAAItB,GAAW,IAAKuB,IAAI,CAACC,SAAS,CAACxB,GAAG,CAAC;AAErE;AACA,MAAMK,kBAAkB,GAAGA,CAAC1B,KAAa,EAAEE,MAAc,KACvDA,MAAM,IAAIF,KAAK,CAACwB,KAAK,CAACD,QAAQ,CAAC,GAAGvB,KAAK,GAAG2C,wBAAwB,CAAC3C,KAAK,CAAC,CAAC;AAE5E;AACA,MAAM2B,mBAAmB,GAAIE,GAAW,IAAM3D,IAAqB,IAAY;EAC7E,MAAM8B,KAAK,GAAGmB,aAAa,CAACjD,IAAI,CAAC8B,KAAK,CAAC;EACvC,OAAO,GAAGA,KAAK,IAAI6B,GAAG,GAAG3D,IAAI,CAACiE,SAAS,IAAI;AAC7C,CAAC;AAED;AACA,OAAO,MAAMW,QAAQ,GAAIP,CAAU,IAA0C;EAC3E,OAAO,OAAOA,CAAC,KAAK,QAAQ,IAAIA,CAAC,IAAI,IAAI,IAAIhF,YAAY,IAAIgF,CAAC;AAChE,CAAC","ignoreList":[]}