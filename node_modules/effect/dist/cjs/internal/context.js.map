{"version":3,"file":"context.js","names":["Equal","_interopRequireWildcard","require","_Function","Hash","_Inspectable","_Pipeable","_Predicate","_effectable","option","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","TagTypeId","exports","Symbol","for","STMSymbolKey","STMTypeId","TagProto","EffectPrototype","_tag","_op","effectVariance","_Service","_","_Identifier","toString","format","toJSON","_id","key","stack","NodeInspectSymbol","of","self","context","make","makeGenericTag","limit","Error","stackTraceLimit","creationError","tag","create","Tag","id","TagClass","setPrototypeOf","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","equals","cached","number","pipe","pipeArguments","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","hasProperty","isTag","_empty","Map","empty","service","add","dual","unsafeGet","getOption","none","some","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,IAAAA,KAAA,gBAAAC,uBAAA,eAAAC,OAAA;AACA,IAAAC,SAAA,gBAAAD,OAAA;AACA,IAAAE,IAAA,gBAAAH,uBAAA,eAAAC,OAAA;AACA,IAAAG,YAAA,gBAAAH,OAAA;AAEA,IAAAI,SAAA,gBAAAJ,OAAA;AACA,IAAAK,UAAA,gBAAAL,OAAA;AAEA,IAAAM,WAAA,gBAAAN,OAAA;AACA,IAAAO,MAAA,gBAAAR,uBAAA,eAAAC,OAAA;AAAqC,SAAAQ,yBAAAC,CAAA;EAAA,yBAAAC,OAAA;EAAA,IAAAC,CAAA,OAAAD,OAAA;IAAAE,CAAA,OAAAF,OAAA;EAAA,QAAAF,wBAAA,YAAAA,CAAAC,CAAA;IAAA,OAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA;EAAA,GAAAF,CAAA;AAAA;AAAA,SAAAV,wBAAAU,CAAA,EAAAE,CAAA;EAAA,KAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,SAAAJ,CAAA;EAAA,aAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA;IAAAK,OAAA,EAAAL;EAAA;EAAA,IAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA;EAAA,IAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,UAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA;EAAA,IAAAQ,CAAA;MAAAC,SAAA;IAAA;IAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA;EAAA,SAAAC,CAAA,IAAAd,CAAA,oBAAAc,CAAA,OAAAC,cAAA,CAAAC,IAAA,CAAAhB,CAAA,EAAAc,CAAA;IAAA,IAAAG,CAAA,GAAAP,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA;IAAAG,CAAA,KAAAA,CAAA,CAAAV,GAAA,IAAAU,CAAA,CAAAC,GAAA,IAAAP,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAG,CAAA,IAAAT,CAAA,CAAAM,CAAA,IAAAd,CAAA,CAAAc,CAAA;EAAA;EAAA,OAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAe,GAAA,CAAAlB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA;AAErC;AACO,MAAMW,SAAS,GAAAC,OAAA,CAAAD,SAAA,gBAAgBE,MAAM,CAACC,GAAG,CAAC,oBAAoB,CAAgB;AAErF;AACA,MAAMC,YAAY,GAAG,YAAY;AAEjC;AACO,MAAMC,SAAS,GAAAJ,OAAA,CAAAI,SAAA,gBAAkBH,MAAM,CAACC,GAAG,CAChDC,YAAY,CACI;AAElB;AACO,MAAME,QAAQ,GAAAL,OAAA,CAAAK,QAAA,GAAQ;EAC3B,GAAG5B,WAAA,CAAA6B,eAAe;EAClBC,IAAI,EAAE,KAAK;EACXC,GAAG,EAAE,KAAK;EACV,CAACJ,SAAS,GAAG3B,WAAA,CAAAgC,cAAc;EAC3B,CAACV,SAAS,GAAG;IACXW,QAAQ,EAAGC,CAAU,IAAKA,CAAC;IAC3BC,WAAW,EAAGD,CAAU,IAAKA;GAC9B;EACDE,QAAQA,CAAA;IACN,OAAO,IAAAvC,YAAA,CAAAwC,MAAM,EAAC,IAAI,CAACC,MAAM,EAAE,CAAC;EAC9B,CAAC;EACDA,MAAMA,CAAA;IACJ,OAAO;MACLC,GAAG,EAAE,KAAK;MACVC,GAAG,EAAE,IAAI,CAACA,GAAG;MACbC,KAAK,EAAE,IAAI,CAACA;KACb;EACH,CAAC;EACD,CAAC5C,YAAA,CAAA6C,iBAAiB,IAAC;IACjB,OAAO,IAAI,CAACJ,MAAM,EAAE;EACtB,CAAC;EACDK,EAAEA,CAAUC,IAAa;IACvB,OAAOA,IAAI;EACb,CAAC;EACDC,OAAOA,CAELD,IAAa;IAEb,OAAOE,IAAI,CAAC,IAAI,EAAEF,IAAI,CAAC;EACzB;CACD;AAED;AACO,MAAMG,cAAc,GAAsCP,GAAW,IAAgC;EAC1G,MAAMQ,KAAK,GAAGC,KAAK,CAACC,eAAe;EACnCD,KAAK,CAACC,eAAe,GAAG,CAAC;EACzB,MAAMC,aAAa,GAAG,IAAIF,KAAK,EAAE;EACjCA,KAAK,CAACC,eAAe,GAAGF,KAAK;EAC7B,MAAMI,GAAG,GAAGtC,MAAM,CAACuC,MAAM,CAACzB,QAAQ,CAAC;EACnCd,MAAM,CAACC,cAAc,CAACqC,GAAG,EAAE,OAAO,EAAE;IAClC1C,GAAGA,CAAA;MACD,OAAOyC,aAAa,CAACV,KAAK;IAC5B;GACD,CAAC;EACFW,GAAG,CAACZ,GAAG,GAAGA,GAAG;EACb,OAAOY,GAAG;AACZ,CAAC;AAED;AAAA7B,OAAA,CAAAwB,cAAA,GAAAA,cAAA;AACO,MAAMO,GAAG,GAA6BC,EAAM,IAAK,MAA+C;EACrG,MAAMP,KAAK,GAAGC,KAAK,CAACC,eAAe;EACnCD,KAAK,CAACC,eAAe,GAAG,CAAC;EACzB,MAAMC,aAAa,GAAG,IAAIF,KAAK,EAAE;EACjCA,KAAK,CAACC,eAAe,GAAGF,KAAK;EAE7B,SAASQ,QAAQA,CAAA,GAAI;EACrB1C,MAAM,CAAC2C,cAAc,CAACD,QAAQ,EAAE5B,QAAQ,CAAC;EACzC4B,QAAQ,CAAChB,GAAG,GAAGe,EAAE;EACjBzC,MAAM,CAACC,cAAc,CAACyC,QAAQ,EAAE,OAAO,EAAE;IACvC9C,GAAGA,CAAA;MACD,OAAOyC,aAAa,CAACV,KAAK;IAC5B;GACD,CAAC;EACF,OAAOe,QAAe;AACxB,CAAC;AAED;AAAAjC,OAAA,CAAA+B,GAAA,GAAAA,GAAA;AACO,MAAMI,MAAM,GAAAnC,OAAA,CAAAmC,MAAA,gBAAalC,MAAM,CAACC,GAAG,CAAC,gBAAgB,CAAa;AAExE;AACO,MAAMkC,YAAY,GAAApC,OAAA,CAAAoC,YAAA,GAA0C;EACjE,CAACD,MAAM,GAAG;IACRE,SAAS,EAAG1B,CAAU,IAAKA;GAC5B;EACD,CAAC1C,KAAK,CAACqE,MAAM,EAAyBC,IAAa;IACjD,IAAIC,SAAS,CAACD,IAAI,CAAC,EAAE;MACnB,IAAI,IAAI,CAACE,SAAS,CAACC,IAAI,KAAKH,IAAI,CAACE,SAAS,CAACC,IAAI,EAAE;QAC/C,KAAK,MAAMC,CAAC,IAAI,IAAI,CAACF,SAAS,CAACG,IAAI,EAAE,EAAE;UACrC,IAAI,CAACL,IAAI,CAACE,SAAS,CAACvD,GAAG,CAACyD,CAAC,CAAC,IAAI,CAAC1E,KAAK,CAAC4E,MAAM,CAAC,IAAI,CAACJ,SAAS,CAACtD,GAAG,CAACwD,CAAC,CAAC,EAAEJ,IAAI,CAACE,SAAS,CAACtD,GAAG,CAACwD,CAAC,CAAC,CAAC,EAAE;YACzF,OAAO,KAAK;UACd;QACF;QACA,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC;EACD,CAACtE,IAAI,CAACiE,MAAM,IAAC;IACX,OAAOjE,IAAI,CAACyE,MAAM,CAAC,IAAI,EAAEzE,IAAI,CAAC0E,MAAM,CAAC,IAAI,CAACN,SAAS,CAACC,IAAI,CAAC,CAAC;EAC5D,CAAC;EACDM,IAAIA,CAAA;IACF,OAAO,IAAAzE,SAAA,CAAA0E,aAAa,EAAC,IAAI,EAAEC,SAAS,CAAC;EACvC,CAAC;EACDrC,QAAQA,CAAA;IACN,OAAO,IAAAvC,YAAA,CAAAwC,MAAM,EAAC,IAAI,CAACC,MAAM,EAAE,CAAC;EAC9B,CAAC;EACDA,MAAMA,CAAA;IACJ,OAAO;MACLC,GAAG,EAAE,SAAS;MACdmC,QAAQ,EAAEC,KAAK,CAACC,IAAI,CAAC,IAAI,CAACZ,SAAS,CAAC,CAACa,GAAG,CAAChF,YAAA,CAAAyC,MAAM;KAChD;EACH,CAAC;EACD,CAACzC,YAAA,CAAA6C,iBAAiB,IAAC;IACjB,OAAQ,IAAY,CAACJ,MAAM,EAAE;EAC/B;CACD;AAED;AACO,MAAMwC,WAAW,GAAcd,SAA2B,IAAyB;EACxF,MAAMnB,OAAO,GAAG/B,MAAM,CAACuC,MAAM,CAACM,YAAY,CAAC;EAC3Cd,OAAO,CAACmB,SAAS,GAAGA,SAAS;EAC7B,OAAOnB,OAAO;AAChB,CAAC;AAAAtB,OAAA,CAAAuD,WAAA,GAAAA,WAAA;AAED,MAAMC,oBAAoB,GAAI3B,GAAoB,IAAI;EACpD,MAAM4B,KAAK,GAAG,IAAI/B,KAAK,CAAC,oBAAoBG,GAAG,CAACZ,GAAG,GAAG,KAAKyC,MAAM,CAAC7B,GAAG,CAACZ,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC;EACpF,IAAIY,GAAG,CAACX,KAAK,EAAE;IACb,MAAMyC,KAAK,GAAG9B,GAAG,CAACX,KAAK,CAAC0C,KAAK,CAAC,IAAI,CAAC;IACnC,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MACpB,MAAMC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,CAAC,SAAS,CAAC;MACzC,IAAID,OAAO,EAAE;QACXL,KAAK,CAACO,OAAO,GAAGP,KAAK,CAACO,OAAO,GAAG,gBAAgBF,OAAO,CAAC,CAAC,CAAC,GAAG;MAC/D;IACF;EACF;EACA,IAAIL,KAAK,CAACvC,KAAK,EAAE;IACf,MAAMyC,KAAK,GAAGF,KAAK,CAACvC,KAAK,CAAC0C,KAAK,CAAC,IAAI,CAAC;IACrCD,KAAK,CAACM,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBR,KAAK,CAACvC,KAAK,GAAGyC,KAAK,CAACO,IAAI,CAAC,IAAI,CAAC;EAChC;EACA,OAAOT,KAAK;AACd,CAAC;AAED;AACO,MAAMjB,SAAS,GAAI9C,CAAU,IAA4B,IAAAlB,UAAA,CAAA2F,WAAW,EAACzE,CAAC,EAAEyC,MAAM,CAAC;AAEtF;AAAAnC,OAAA,CAAAwC,SAAA,GAAAA,SAAA;AACO,MAAM4B,KAAK,GAAI1E,CAAU,IAA2B,IAAAlB,UAAA,CAAA2F,WAAW,EAACzE,CAAC,EAAEK,SAAS,CAAC;AAAAC,OAAA,CAAAoE,KAAA,GAAAA,KAAA;AAEpF,MAAMC,MAAM,gBAAGd,WAAW,eAAC,IAAIe,GAAG,EAAE,CAAC;AAErC;AACO,MAAMC,KAAK,GAAGA,CAAA,KAAwBF,MAAM;AAEnD;AAAArE,OAAA,CAAAuE,KAAA,GAAAA,KAAA;AACO,MAAMhD,IAAI,GAAGA,CAClBM,GAAM,EACN2C,OAAyB,KACUjB,WAAW,CAAC,IAAIe,GAAG,CAAC,CAAC,CAACzC,GAAG,CAACZ,GAAG,EAAEuD,OAAO,CAAC,CAAC,CAAC,CAAC;AAE/E;AAAAxE,OAAA,CAAAuB,IAAA,GAAAA,IAAA;AACO,MAAMkD,GAAG,GAAAzE,OAAA,CAAAyE,GAAA,gBAAG,IAAArG,SAAA,CAAAsG,IAAI,EAYrB,CAAC,EAAE,CAACrD,IAAI,EAAEQ,GAAG,EAAE2C,OAAO,KAAI;EAC1B,MAAMlB,GAAG,GAAG,IAAIgB,GAAG,CAACjD,IAAI,CAACoB,SAAS,CAAC;EACnCa,GAAG,CAACxD,GAAG,CAAC+B,GAAG,CAACZ,GAAG,EAAEuD,OAAO,CAAC;EACzB,OAAOjB,WAAW,CAACD,GAAG,CAAC;AACzB,CAAC,CAAC;AAEF;AACO,MAAMqB,SAAS,GAAA3E,OAAA,CAAA2E,SAAA,gBAAG,IAAAvG,SAAA,CAAAsG,IAAI,EAG3B,CAAC,EAAE,CAACrD,IAAI,EAAEQ,GAAG,KAAI;EACjB,IAAI,CAACR,IAAI,CAACoB,SAAS,CAACvD,GAAG,CAAC2C,GAAG,CAACZ,GAAG,CAAC,EAAE;IAChC,MAAMuC,oBAAoB,CAAC3B,GAAU,CAAC;EACxC;EACA,OAAOR,IAAI,CAACoB,SAAS,CAACtD,GAAG,CAAC0C,GAAG,CAACZ,GAAG,CAAS;AAC5C,CAAC,CAAC;AAEF;AACO,MAAM9B,GAAG,GAAAa,OAAA,CAAAb,GAAA,GAGZwF,SAAS;AAEb;AACO,MAAMC,SAAS,GAAA5E,OAAA,CAAA4E,SAAA,gBAAG,IAAAxG,SAAA,CAAAsG,IAAI,EAG3B,CAAC,EAAE,CAACrD,IAAI,EAAEQ,GAAG,KAAI;EACjB,IAAI,CAACR,IAAI,CAACoB,SAAS,CAACvD,GAAG,CAAC2C,GAAG,CAACZ,GAAG,CAAC,EAAE;IAChC,OAAOvC,MAAM,CAACmG,IAAI;EACpB;EACA,OAAOnG,MAAM,CAACoG,IAAI,CAACzD,IAAI,CAACoB,SAAS,CAACtD,GAAG,CAAC0C,GAAG,CAACZ,GAAG,CAAS,CAAC;AACzD,CAAC,CAAC;AAEF;AACO,MAAM8D,KAAK,GAAA/E,OAAA,CAAA+E,KAAA,gBAAG,IAAA3G,SAAA,CAAAsG,IAAI,EAGvB,CAAC,EAAE,CAACrD,IAAI,EAAEkB,IAAI,KAAI;EAClB,MAAMe,GAAG,GAAG,IAAIgB,GAAG,CAACjD,IAAI,CAACoB,SAAS,CAAC;EACnC,KAAK,MAAM,CAACZ,GAAG,EAAEmD,CAAC,CAAC,IAAIzC,IAAI,CAACE,SAAS,EAAE;IACrCa,GAAG,CAACxD,GAAG,CAAC+B,GAAG,EAAEmD,CAAC,CAAC;EACjB;EACA,OAAOzB,WAAW,CAACD,GAAG,CAAC;AACzB,CAAC,CAAC;AAEF;AACO,MAAM2B,IAAI,GACfA,CAAuD,GAAGC,IAAO,KAChE7D,IAAyB,IAEtB;EACF,MAAM8D,MAAM,GAAG,IAAIC,GAAG,CAASF,IAAI,CAAC5B,GAAG,CAAE3C,CAAC,IAAKA,CAAC,CAACM,GAAG,CAAC,CAAC;EACtD,MAAMoE,MAAM,GAAG,IAAIf,GAAG,EAAE;EACxB,KAAK,MAAM,CAACzC,GAAG,EAAEmD,CAAC,CAAC,IAAI3D,IAAI,CAACoB,SAAS,CAAC6C,OAAO,EAAE,EAAE;IAC/C,IAAIH,MAAM,CAACjG,GAAG,CAAC2C,GAAG,CAAC,EAAE;MACnBwD,MAAM,CAACvF,GAAG,CAAC+B,GAAG,EAAEmD,CAAC,CAAC;IACpB;EACF;EACA,OAAOzB,WAAW,CAAqD8B,MAAM,CAAC;AAChF,CAAC;AAEH;AAAArF,OAAA,CAAAiF,IAAA,GAAAA,IAAA;AACO,MAAMM,IAAI,GACfA,CAAuD,GAAGL,IAAO,KAChE7D,IAAyB,IAEtB;EACF,MAAMgE,MAAM,GAAG,IAAIf,GAAG,CAACjD,IAAI,CAACoB,SAAS,CAAC;EACtC,KAAK,MAAMZ,GAAG,IAAIqD,IAAI,EAAE;IACtBG,MAAM,CAACG,MAAM,CAAC3D,GAAG,CAACZ,GAAG,CAAC;EACxB;EACA,OAAOsC,WAAW,CAAC8B,MAAM,CAAC;AAC5B,CAAC;AAAArF,OAAA,CAAAuF,IAAA,GAAAA,IAAA","ignoreList":[]}