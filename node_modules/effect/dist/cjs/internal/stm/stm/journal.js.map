{"version":3,"file":"journal.js","names":["Entry","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","JournalAnalysisInvalid","exports","JournalAnalysisReadWrite","JournalAnalysisReadOnly","commitJournal","journal","entry","commit","analyzeJournal","val","isInvalid","isChanged","prepareResetJournal","saved","Map","copy","clear","collectTodos","allTodos","todo","ref","todos","execTodos","todosSorted","Array","from","entries","sort","x","y","_","addTodo","txnId","todoEffect","added","isValid","valid"],"sources":["../../../../../src/internal/stm/stm/journal.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}