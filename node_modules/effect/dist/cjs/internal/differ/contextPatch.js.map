{"version":3,"file":"contextPatch.js","names":["Chunk","_interopRequireWildcard","require","Equal","Dual","_context","_data","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ContextPatchTypeId","exports","Symbol","for","variance","PatchProto","Structural","prototype","_Value","_Patch","EmptyProto","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AddServiceProto","makeAddService","key","service","RemoveServiceProto","makeRemoveService","UpdateServiceProto","makeUpdateService","update","diff","oldValue","newValue","missingServices","Map","unsafeMap","patch","tag","newService","entries","old","delete","equals","combine","dual","self","that","context","wasServiceUpdated","patches","of","updatedContext","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","makeContext","map","s"],"sources":["../../../../src/internal/differ/contextPatch.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}